(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){"use strict";var instances=[],matchers=[],defaultOptions={precision:100,elapse:false};matchers.push(/^[0-9]*$/.source);matchers.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);matchers.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);matchers=new RegExp(matchers.join("|"));function parseDateString(dateString){if(dateString instanceof Date){return dateString}if(String(dateString).match(matchers)){if(String(dateString).match(/^[0-9]*$/)){dateString=Number(dateString)}if(String(dateString).match(/\-/)){dateString=String(dateString).replace(/\-/g,"/")}return new Date(dateString)}else{throw new Error("Couldn't cast `"+dateString+"` to a date object.")}}var DIRECTIVE_KEY_MAP={Y:"years",m:"months",n:"daysToMonth",w:"weeks",d:"daysToWeek",D:"totalDays",H:"hours",M:"minutes",S:"seconds"};function escapedRegExp(str){var sanitize=str.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(sanitize)}function strftime(offsetObject){return function(format){var directives=format.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(directives){for(var i=0,len=directives.length;i<len;++i){var directive=directives[i].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),regexp=escapedRegExp(directive[0]),modifier=directive[1]||"",plural=directive[3]||"",value=null;directive=directive[2];if(DIRECTIVE_KEY_MAP.hasOwnProperty(directive)){value=DIRECTIVE_KEY_MAP[directive];value=Number(offsetObject[value])}if(value!==null){if(modifier==="!"){value=pluralize(plural,value)}if(modifier===""){if(value<10){value="0"+value.toString()}}format=format.replace(regexp,value.toString())}}}format=format.replace(/%%/,"%");return format}}function pluralize(format,count){var plural="s",singular="";if(format){format=format.replace(/(:|;|\s)/gi,"").split(/\,/);if(format.length===1){plural=format[0]}else{singular=format[0];plural=format[1]}}if(Math.abs(count)===1){return singular}else{return plural}}var Countdown=function(el,finalDate,options){this.el=el;this.$el=$(el);this.interval=null;this.offset={};this.options=$.extend({},defaultOptions);this.instanceNumber=instances.length;instances.push(this);this.$el.data("countdown-instance",this.instanceNumber);if(options){if(typeof options==="function"){this.$el.on("update.countdown",options);this.$el.on("stoped.countdown",options);this.$el.on("finish.countdown",options)}else{this.options=$.extend({},defaultOptions,options)}}this.setFinalDate(finalDate);this.start()};$.extend(Countdown.prototype,{start:function(){if(this.interval!==null){clearInterval(this.interval)}var self=this;this.update();this.interval=setInterval(function(){self.update.call(self)},this.options.precision)},stop:function(){clearInterval(this.interval);this.interval=null;this.dispatchEvent("stoped")},toggle:function(){if(this.interval){this.stop()}else{this.start()}},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this);instances[this.instanceNumber]=null;delete this.$el.data().countdownInstance},setFinalDate:function(value){this.finalDate=parseDateString(value)},update:function(){if(this.$el.closest("html").length===0){this.remove();return}var hasEventsAttached=$._data(this.el,"events")!==undefined,now=new Date,newTotalSecsLeft;newTotalSecsLeft=this.finalDate.getTime()-now.getTime();newTotalSecsLeft=Math.ceil(newTotalSecsLeft/1e3);newTotalSecsLeft=!this.options.elapse&&newTotalSecsLeft<0?0:Math.abs(newTotalSecsLeft);if(this.totalSecsLeft===newTotalSecsLeft||!hasEventsAttached){return}else{this.totalSecsLeft=newTotalSecsLeft}this.elapsed=now>=this.finalDate;this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-now.getFullYear())};if(!this.options.elapse&&this.totalSecsLeft===0){this.stop();this.dispatchEvent("finish")}else{this.dispatchEvent("update")}},dispatchEvent:function(eventName){var event=$.Event(eventName+".countdown");event.finalDate=this.finalDate;event.elapsed=this.elapsed;event.offset=$.extend({},this.offset);event.strftime=strftime(this.offset);this.$el.trigger(event)}});$.fn.countdown=function(){var argumentsArray=Array.prototype.slice.call(arguments,0);return this.each(function(){var instanceNumber=$(this).data("countdown-instance");if(instanceNumber!==undefined){var instance=instances[instanceNumber],method=argumentsArray[0];if(Countdown.prototype.hasOwnProperty(method)){instance[method].apply(instance,argumentsArray.slice(1))}else if(String(method).match(/^[$A-Z_][0-9A-Z_$]*$/i)===null){instance.setFinalDate.call(instance,method);instance.start()}else{$.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,method))}}else{new Countdown(this,argumentsArray[0],argumentsArray[1])}})}});var map;var markers=[];var marker=[];var locations=[{position:{lat:41.7996127,lng:-91.5666657},title:"ceremony",icon_url:"./img/icons/map-ceremony.png"},{position:{lat:41.8300431,lng:-91.0283526},title:"reception",icon_url:"./img/icons/map-reception.png"},{position:{lat:41.9138846,lng:-91.4228095},title:"hotel",icon_url:"./img/icons/map-hotel.png"}];function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:41.8352627,lng:-91.3164834},zoom:10,scrollwheel:false,mapTypeControl:false,streetViewControl:false,draggable:!("ontouchend"in document),styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}]});addMarkers()}function addMarkers(){for(var x=locations.length-1;x>=0;x--){var title=locations[x].title;marker[title]=new google.maps.Marker({map:map,position:locations[x].position,title:title,icon:{url:locations[x].icon_url,scaledSize:new google.maps.Size(50,50)}});marker[title].addListener("click",function(){updateIcons(this.getTitle())})}}function updateIcons(title){for(var x=locations.length-1;x>=0;x--){var marker_title=locations[x].title;if(title!=marker_title){marker[marker_title].setIcon({url:"./img/icons/map-"+marker_title+".png",scaledSize:new google.maps.Size(50,50)})}}marker[title].setIcon({url:"./img/icons/map-"+title+"-active.png",scaledSize:new google.maps.Size(50,50)})}(function($){$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]!==undefined){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}});return o};$(".countdown").countdown("10/01/2016 15:00:00",{elapse:true}).on("update.countdown",function(event){var $this=$(this);var format='<div class="g g-xxs-2 g-m-4"><div class="gi days"><div class="block"><span class="number">%D</span><span class="suffix">days</span></div></div><div class="gi hours"><div class="block"><span class="number">%H</span><span class="suffix">hours</span></div></div><div class="gi minutes"><div class="block"><span class="number">%M</span><span class="suffix">minutes</span></div></div><div class="gi seconds"><div class="block"><span class="number">%S</span><span class="suffix">seconds</span></div></div></div>';if(event.elapsed){$this.html(event.strftime('<h3 class="heading">Happily <span>Married</span> for...</h3>'+format))}else{$this.html(event.strftime('<h3 class="heading">Getting <span>Married</span> in...</h3>'+format))}});$("input[name=attending]").change(function(){resetFields();if(this.value=="accept"){$(".personal-accept").show();$(".personal-decline").hide()}else if(this.value=="decline"){$(".personal-accept").hide();$(".personal-decline").show();$(".guest-yes").hide()}});$("input[name=guest_attending]").change(function(){if(this.value=="yes"){$(".guest-yes").show()}else if(this.value=="no"){$(".guest-yes").hide()}});var resetFields=function(){$("input[name=email], input[name=guests_first_name], input[name=guests_last_name], input[name=guests_email]").val("");$("input[name=guest_attending], input[name=shuttle], input[name=meal]").attr("checked",false);$("textarea[name=comments], textarea[name=regrets]").val("")};var validateFields=function(fields){var submit=true;var error_msgs="";var is_attending=fields.attending&&fields.attending=="accept";if(!fields.attending){error_msgs+="<li>Let us know if you will be attending or not.</li>";submit=false}if(!fields.first_name){error_msgs+="<li>Enter your first name.</li>";submit=false}if(!fields.last_name){error_msgs+="<li>Enter your last name.</li>";submit=false}if(is_attending&&!fields.email){error_msgs+="<li>Enter your email.</li>";submit=false}if(is_attending&&!fields.shuttle){error_msgs+="<li>Let us know if you will be using the shuttle service.</li>";submit=false}if(is_attending&&!fields.meal){error_msgs+="<li>Choose your main dish.</li>";submit=false}var is_guest_attending=fields.guest_attending&&fields.guest_attending=="yes";if(is_attending&&!fields.guest_attending){error_msgs+="<li>Let us know if you will be bringing a guest.</li>";submit=false}if(is_guest_attending&&!fields.guests_first_name){error_msgs+="<li>Enter your guest's first name.</li>";submit=false}if(is_guest_attending&&!fields.guests_last_name){error_msgs+="<li>Enter your guest's last name.</li>";submit=false}if(is_guest_attending&&!fields.guests_meal){error_msgs+="<li>Choose your guest's main dish.</li>";submit=false}return{send:submit,errors:error_msgs}};$(".rsvp-form").submit(function(e){e.preventDefault();var form_data=$(this).serializeObject();var submit=validateFields(form_data);if(submit.send!==false){$.ajax({url:$(".rsvp-form").attr("action"),method:"POST",data:form_data,dataType:"json"}).done(function(data){if(data.success){$(".rsvp-form").hide();if(form_data.attending=="accept"){console.log("Attending! Yay :)");$(".rsvp-form-notice").html("Thanks for RSVPing!<br>We are excited to celebrate our big day with you!").fadeIn()}else{console.log("Not attending. Butthead :(");$(".rsvp-form-notice").html("Thanks for RSVPing!<br>Sorry to see you won't be joining us... :(").fadeIn()}}})}else{$(".form-errors").html(submit.errors).slideDown();$("html, body").animate({scrollTop:$("#rsvp").offset().top},500)}});$("#rsvp-form").on("keyup keypress",function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.preventDefault();return false}});window.sr=ScrollReveal({distance:"50px",viewFactor:.75,scale:1,duration:1e3});sr.reveal(".section--couple .gi");sr.reveal(".section--wedding-party .bridesmaids .gi",{origin:"right"},250);sr.reveal(".section--wedding-party .groomsmen .gi",{origin:"right"},250);sr.reveal(".section--wedding-party .honorable .gi",{origin:"right"},250);sr.reveal(".section--festivities .ceremony",{origin:"left"});sr.reveal(".section--festivities .cocktail");sr.reveal(".section--festivities .reception",{origin:"right"});sr.reveal(".section--accommodations .lodging",{origin:"left"});sr.reveal(".section--accommodations .transportation",{origin:"right"});sr.reveal(".section--registry .gi",250);var parallax_el=document.querySelectorAll(".section--parallax");var speed=.25;if(window.innerWidth>1024){window.onscroll=function(){[].slice.call(parallax_el).forEach(function(el,i){el.style.backgroundPosition="center "+-(window.pageYOffset-el.offsetTop)*speed+"px"})}}})(jQuery);